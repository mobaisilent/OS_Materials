## 关于创建用户

### 添加用户

```shell
useradd -m os6905
```

创建用户的同时创建目录



```shell
passwd os6905
```

修改密码



### 赋权

然后赋予权限

```shell
sudo vi /etc/sudoers
```

 找到 User privilege specification，输入i从命令模式切换到输入模式并新增下图所示信息, 3、Esc后输入:wq!强制保存并退出  (注：也就是在root那下面那行添加下列那行语句)

添加下列内容

```shell
os6905 ALL=(ALL:ALL) ALL
```



### 设置用户命令解释器

```shell
sudo vi /etc/passwd
```

然后输入G 到行末

将sh改为bash



### 切换user

```shell
su os6905
```





## 实操代码

```shell
Linux Huanan1 6.7.9-bbrplus #1 SMP PREEMPT_DYNAMIC Sun Mar 10 17:47:31 CST 2024 x86_64

Welcome to Alibaba Cloud Elastic Compute Service !

Last login: Mon Jun  3 08:21:43 2024 from 223.104.133.160
root@Huanan1:~# userdel os6905
root@Huanan1:~# cd /home
root@Huanan1:/home# ls
nginxWebUI  os6905
root@Huanan1:/home# rm os6905
rm: cannot remove 'os6905': Is a directory
root@Huanan1:/home# rm  -rf os6905
root@Huanan1:/home# cd
root@Huanan1:~# who am i
root     pts/0        2024-06-03 08:29 (223.104.133.160)
root@Huanan1:~# pwd
/root
root@Huanan1:~# useradd -m os6905
root@Huanan1:~# passwd os6905
New password: 
Retype new password: 
passwd: password updated successfully
root@Huanan1:~# vi /etc/sudoers
root@Huanan1:~# su vi /etc/sudoers
su: user vi does not exist or the user entry does not contain all the required fields
root@Huanan1:~# sudo vi /etc/sudoers
root@Huanan1:~# sudo vi /etc/passwd
root@Huanan1:~# su os6905
os6905@Huanan1:/root$ whoamii
bash: whoamii: command not found
os6905@Huanan1:/root$ whoami
os6905
os6905@Huanan1:/root$ pwd
/root
os6905@Huanan1:/root$ cd
os6905@Huanan1:~$ ls
os6905@Huanan1:~$ pwd
/home/os6905
os6905@Huanan1:~$ mkdir lab1
os6905@Huanan1:~$ cd lab1
os6905@Huanan1:~/lab1$ vi test.c
os6905@Huanan1:~/lab1$ cat test.c
#include <stdio.h>

int main(){
    printf("hello world");
    return 0;
}
os6905@Huanan1:~/lab1$ ls -al
total 12
drwxr-xr-x 2 os6905 os6905 4096 Jun  3 08:38 .
drwxr-xr-x 3 os6905 os6905 4096 Jun  3 08:38 ..
-rw-r--r-- 1 os6905 os6905   75 Jun  3 08:38 test.c
os6905@Huanan1:~/lab1$ chmod +777 test.sh
chmod: cannot access 'test.sh': No such file or directory
os6905@Huanan1:~/lab1$ chmod +777 test.c
os6905@Huanan1:~/lab1$ gcc test.c
os6905@Huanan1:~/lab1$ ls -al
total 32
drwxr-xr-x 2 os6905 os6905  4096 Jun  3 08:40 .
drwxr-xr-x 3 os6905 os6905  4096 Jun  3 08:38 ..
-rwxr-xr-x 1 os6905 os6905 16608 Jun  3 08:40 a.out
-rwxrwxrwx 1 os6905 os6905    75 Jun  3 08:38 test.c
os6905@Huanan1:~/lab1$ ./a.out
hello worldos6905@Huanan1:~/lab1$ 
os6905@Huanan1:~/lab1$ 
os6905@Huanan1:~/lab1$ vim test.c
os6905@Huanan1:~/lab1$ cat test.c
#include <stdio.h>

int main(){
    printf("hello world\n");
    return 0;
}
os6905@Huanan1:~/lab1$ gcc test.c -o hello
os6905@Huanan1:~/lab1$ ls
a.out  hello  test.c
os6905@Huanan1:~/lab1$ ./hello
hello world
os6905@Huanan1:~/lab1$ vim first.c
os6905@Huanan1:~/lab1$ cat first.c
#include <stdio.h>

int main() {
    int i, a, b, c;
    for(i = 100; i < 1000; i++) {
        a = i / 100; // 百位数
        b = i / 10 % 10; // 十位数
        c = i % 10; // 个位数
        if(a*a*a + b*b*b + c*c*c == i) {
            printf("%d\n", i);
        }
    }
    return 0;
}

os6905@Huanan1:~/lab1$ vim second.c
os6905@Huanan1:~/lab1$ cat second.c
#include <stdio.h>

int main() {
    int i, j, sum;
    for(i = 1; i <= 10000; i++) {
        sum = 0;
        for(j = 1; j < i; j++) {
            if(i % j == 0) {
                sum += j;
            }
        }
        if(sum == i) {
            printf("%d\n", i);
        }
    }
    return 0;
}

os6905@Huanan1:~/lab1$ gcc first.c -o first
os6905@Huanan1:~/lab1$ gcc second.c -o second
os6905@Huanan1:~/lab1$ gd 
bash: gd: command not found
os6905@Huanan1:~/lab1$ gdb
bash: gdb: command not found
os6905@Huanan1:~/lab1$ apt install gdb
E: Could not open lock file /var/lib/dpkg/lock-frontend - open (13: Permission denied)
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?
os6905@Huanan1:~/lab1$ su apt install gdb
su: user apt does not exist or the user entry does not contain all the required fields
os6905@Huanan1:~/lab1$ gdb
GNU gdb (Debian 10.1-1.7) 10.1.90.20210103-git
Copyright (C) 2021 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word".
(gdb) file /home/os6905/lab1/first
Reading symbols from /home/os6905/lab1/first...
(No debugging symbols found in /home/os6905/lab1/first)
(gdb) list
No symbol table is loaded.  Use the "file" command.
(gdb) file /home/os6905/lab1
/home/os6905/lab1: Is a directory.
(gdb) file /home/os6905/lab1/first.c
"0x7ffe289ae200s": not in executable format: file format not recognized
(gdb) quit
os6905@Huanan1:~/lab1$ ls
a.out  first  first.c  hello  second  second.c  test.c
os6905@Huanan1:~/lab1$ rm -f first
os6905@Huanan1:~/lab1$ rm -f second
os6905@Huanan1:~/lab1$ gcc -g -o first.c first
gcc: error: first: No such file or directory
gcc: fatal error: no input files
compilation terminated.
os6905@Huanan1:~/lab1$ ls
a.out  first.c  hello  second.c  test.c
os6905@Huanan1:~/lab1$ gcc first.c -o first -g
os6905@Huanan1:~/lab1$ gcc second.c -o second -g
os6905@Huanan1:~/lab1$ gdb
GNU gdb (Debian 10.1-1.7) 10.1.90.20210103-git
Copyright (C) 2021 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word".
(gdb) file /home/os6905/lab1/first
Reading symbols from /home/os6905/lab1/first...
(gdb) list
1       #include <stdio.h>
2
3       int main() {
4           int i, a, b, c;
5           for(i = 100; i < 1000; i++) {
6               a = i / 100; // 百位数
7               b = i / 10 % 10; // 十位数
8               c = i % 10; // 个位数
9               if(a*a*a + b*b*b + c*c*c == i) {
10                  printf("%d\n", i);
(gdb) 
11              }
12          }
13          return 0;
14      }
15
(gdb) 
Line number 16 out of range; first.c has 15 lines.
(gdb) break 10
Breakpoint 1 at 0x1202: file first.c, line 10.
(gdb) run
Starting program: /home/os6905/lab1/first 

Breakpoint 1, main () at first.c:10
10                  printf("%d\n", i);
(gdb) continue
Continuing.
153

Breakpoint 1, main () at first.c:10
10                  printf("%d\n", i);
(gdb) continue
Continuing.
370

Breakpoint 1, main () at first.c:10
10                  printf("%d\n", i);
(gdb) continue
Continuing.
371

Breakpoint 1, main () at first.c:10
10                  printf("%d\n", i);
(gdb) continue
Continuing.
407
[Inferior 1 (process 106103) exited normally]
(gdb) quit
os6905@Huanan1:~/lab1$ gdb
GNU gdb (Debian 10.1-1.7) 10.1.90.20210103-git
Copyright (C) 2021 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word".
(gdb) file /home/os6905/lab1/second
Reading symbols from /home/os6905/lab1/second...
(gdb) list
1       #include <stdio.h>
2
3       int main() {
4           int i, j, sum;
5           for(i = 1; i <= 10000; i++) {
6               sum = 0;
7               for(j = 1; j < i; j++) {
8                   if(i % j == 0) {
9                       sum += j;
10                  }
(gdb) 
11              }
12              if(sum == i) {
13                  printf("%d\n", i);
14              }
15          }
16          return 0;
17      }
18
(gdb) 
Line number 19 out of range; second.c has 18 lines.
(gdb) break 13
Breakpoint 1 at 0x117d: file second.c, line 13.
(gdb) run
Starting program: /home/os6905/lab1/second 

Breakpoint 1, main () at second.c:13
13                  printf("%d\n", i);
(gdb) continue
Continuing.
6

Breakpoint 1, main () at second.c:13
13                  printf("%d\n", i);
(gdb) continue
Continuing.
28

Breakpoint 1, main () at second.c:13
13                  printf("%d\n", i);
(gdb) continue
Continuing.
496

Breakpoint 1, main () at second.c:13
13                  printf("%d\n", i);
(gdb) continue
Continuing.
8128
[Inferior 1 (process 106111) exited normally]
(gdb) quit
os6905@Huanan1:~/lab1$ 
```

